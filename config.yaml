# Credit Spread Trading System Configuration

# Tickers to monitor
tickers:
  - SPY
  - QQQ
  - IWM

# Strategy Parameters
strategy:
  # Days to expiration range for new positions
  min_dte: 30
  max_dte: 45

  # Manage positions at this DTE or earlier
  manage_dte: 21

  # Target delta for short strike (0.10-0.15 recommended)
  min_delta: 0.10
  max_delta: 0.15

  # Width of spreads in dollars
  spread_width: 5

  # IV Rank filters (enter when IV is elevated)
  min_iv_rank: 25  # IV Rank minimum (0-100)
  min_iv_percentile: 25  # IV Percentile minimum (0-100)

  # Technical filters
  technical:
    use_trend_filter: true
    use_rsi_filter: true
    use_support_resistance: true

    # Moving averages for trend
    fast_ma: 20
    slow_ma: 50

    # RSI parameters
    rsi_period: 14
    rsi_oversold: 30
    rsi_overbought: 70

# Risk Management
risk:
  # Account size (USD)
  account_size: 100000

  # Max risk per trade as % of account
  max_risk_per_trade: 2.0  # 2%

  # Max number of concurrent positions
  max_positions: 7

  # Profit target (% of credit received)
  profit_target: 50  # Close at 50% profit

  # Stop loss (multiple of credit received)
  stop_loss_multiplier: 2.5  # Exit if loss = 2.5x credit

  # Delta threshold for early exit
  delta_threshold: 0.30  # Exit if short strike delta exceeds this

  # Minimum credit to collect (% of spread width)
  min_credit_pct: 20  # Collect at least 20% of spread width

# Alert Settings
alerts:
  # Output formats
  output_json: true
  output_text: true
  output_csv: true

  # Alert file paths (relative to project root)
  json_file: "alerts.json"
  text_file: "alerts.txt"
  csv_file: "alerts.csv"

  # Telegram settings
  telegram:
    enabled: false  # Set to true when configured
    bot_token: "YOUR_BOT_TOKEN_HERE"
    chat_id: "YOUR_CHAT_ID_HERE"

# Alpaca Paper Trading
alpaca:
  enabled: true
  api_key: "REDACTED_ALPACA_KEY"
  api_secret: "REDACTED_ALPACA_SECRET"
  paper: true  # true = paper trading, false = live

# Data Settings
data:
  # Data provider: "yfinance" (free, 15-min delay), "tradier" (real-time), or "polygon" (real-time)
  provider: "polygon"

  # Tradier API settings (get free key at https://developer.tradier.com)
  tradier:
    api_key: "YOUR_TRADIER_API_KEY"

  # Polygon.io / Massive API settings
  polygon:
    api_key: "REDACTED_POLYGON_KEY"
    sandbox: true  # true = sandbox (free), false = production

  # Historical data lookback for backtesting (days)
  backtest_lookback: 365

  # Cache settings
  use_cache: true
  cache_expiry_minutes: 15

# Logging
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "logs/trading_system.log"
  console: true

# Backtesting
backtest:
  # Starting capital
  starting_capital: 100000

  # Commission per contract (one side)
  commission_per_contract: 0.65

  # Slippage (dollars per spread)
  slippage: 0.05

  # Generate reports
  generate_reports: true
  report_dir: "output/backtest_reports"
